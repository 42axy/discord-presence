<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Discord Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

    body {
        margin: 0;
        background: #1e1f22;
        font-family: "Inter", sans-serif;
        display: flex;
        justify-content: center;
        padding-top: 40px;
        color: #fff;
    }

    .profile-container {
        width: 420px;
        background: #313338;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 5px 25px rgba(0,0,0,0.5);
    }

    .banner {
        height: 130px;
        background: linear-gradient(135deg, #5865F2, #4B56E1);
        position: relative;
    }

    .avatar-area {
        position: absolute;
        bottom: -40px;
        left: 20px;
    }

    .avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 6px solid #313338;
    }

    .user-info {
        padding: 50px 20px 20px;
    }

    .username {
        font-size: 22px;
        font-weight: 600;
        display: flex;
        align-items: center;
    }

    .status-dot {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        margin-left: 10px;
        border: 3px solid #313338;
    }

    .section {
        background: #2b2d31;
        padding: 12px 15px;
        margin-top: 14px;
        border-radius: 6px;
    }

    .section-title {
        font-size: 13px;
        font-weight: 600;
        color: #b5bac1;
        margin-bottom: 6px;
    }

    .status-text, .activity-text, .spotify-text {
        font-size: 14px;
        color: #dbdee1;
        line-height: 1.4em;
        white-space: pre-line;
    }

    .spotify-box {
        display: flex;
        margin-top: 8px;
    }

    .spotify-cover {
        width: 64px;
        height: 64px;
        border-radius: 4px;
        margin-right: 12px;
    }

    .spotify-details {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
</style>
</head>

<body>

<div class="profile-container">

    <div class="banner" id="banner"></div>

    <div class="avatar-area">
        <img id="avatar" class="avatar">
    </div>

    <div class="user-info">
        <div class="username">
            <span id="username">Loading...</span>
            <span id="status-dot" class="status-dot"></span>
        </div>

        <div class="section">
            <div class="section-title">STATUS</div>
            <div id="status-text" class="status-text">Loading status…</div>
        </div>

        <div class="section">
            <div class="section-title">ACTIVITY</div>
            <div id="activity-text" class="activity-text">Fetching activity…</div>
        </div>

        <div class="section" id="spotify-section" style="display:none;">
            <div class="section-title">LISTENING TO SPOTIFY</div>
            <div class="spotify-box">
                <img id="spotify-cover" class="spotify-cover">
                <div class="spotify-details">
                    <div id="spotify-song" class="spotify-text"></div>
                    <div id="spotify-artist" class="spotify-text"></div>
                    <div id="spotify-album" class="spotify-text"></div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
const USER_ID = "977887737912901642"; // << REPLACE THIS

function setStatusColor(status) {
    const dot = document.getElementById("status-dot");
    const colors = {
        online: "#3ba55d",
        idle: "#faa61a",
        dnd: "#ed4245",
        offline: "#747f8d"
    };
    dot.style.background = colors[status] || "#747f8d";
}

async function loadProfile() {
    const res = await fetch(`https://api.lanyard.rest/v1/users/${USER_ID}`);
    const data = await res.json();
    if (!data.success) return;

    const d = data.data;

    // Avatar
    document.getElementById("avatar").src =
        `https://cdn.discordapp.com/avatars/${USER_ID}/${d.discord_user.avatar}.png?size=256`;

    // Banner (if available)
    if (d.discord_user.banner) {
        document.getElementById("banner").style.background =
            `url(https://cdn.discordapp.com/banners/${USER_ID}/${d.discord_user.banner}.png?size=512) center/cover`;
    }

    // Username
    document.getElementById("username").textContent = d.discord_user.username;

    // Status
    setStatusColor(d.discord_status);

    // Custom status
    const custom = d.activities.find(a => a.type === 4);
    document.getElementById("status-text").textContent =
        custom?.state || "No custom status set.";

    // Game / Application Activity
    const act = d.activities.find(a => a.type === 0);
    document.getElementById("activity-text").textContent =
        act ? `${act.name}\n${act.details || ""}\n${act.state || ""}` : "No activity.";

    // Spotify Activity
    if (d.spotify) {
        document.getElementById("spotify-section").style.display = "block";

        document.getElementById("spotify-cover").src = d.spotify.album_art_url;

        document.getElementById("spotify-song").textContent = d.spotify.song;
        document.getElementById("spotify-artist").textContent = d.spotify.artist;
        document.getElementById("spotify-album").textContent = "Album: " + d.spotify.album;
    } else {
        document.getElementById("spotify-section").style.display = "none";
    }
}

loadProfile();
setInterval(loadProfile, 3000);
</script>

</body>
</html>
